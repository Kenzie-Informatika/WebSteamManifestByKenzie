<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="page-title">Steam Manifest Downloader</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #0066ff;
            --primary-light: #3384ff;
            --primary-dark: #0052cc;
            --secondary-color: #6c5ce7;
            --success-color: #00b894;
            --error-color: #e74c3c;
            --warning-color: #f39c12;
            --bg-primary: #0a0e27;
            --bg-secondary: #151b3d;
            --bg-card: rgba(21, 27, 61, 0.8);
            --text-primary: #ffffff;
            --text-secondary: #a8b2d1;
            --text-muted: #6c7293;
            --border-color: rgba(255, 255, 255, 0.1);
            --shadow-sm: 0 2px 10px rgba(0, 0, 0, 0.1);
            --shadow-md: 0 8px 40px rgba(0, 0, 0, 0.15);
            --shadow-lg: 0 20px 60px rgba(0, 0, 0, 0.3);
            --gradient-primary: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            --gradient-bg: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
            --border-radius: 16px;
            --border-radius-sm: 8px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            min-height: 100vh;
            background: var(--gradient-bg);
            color: var(--text-primary);
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background:
                radial-gradient(circle at 20% 80%, rgba(0, 102, 255, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(108, 92, 231, 0.15) 0%, transparent 50%);
            pointer-events: none;
            z-index: -1;
        }

        .container {
            width: min(90%, 520px);
            padding: 2.5rem;
            background: var(--bg-card);
            border-radius: var(--border-radius);
            border: 1px solid var(--border-color);
            backdrop-filter: blur(20px);
            box-shadow: var(--shadow-lg);
            position: relative;
            animation: slideUp 0.6s ease-out;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .header {
            text-align: center;
            margin-bottom: 2.5rem;
            position: relative;
        }

        .header::after {
            content: '';
            position: absolute;
            bottom: -1rem;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 3px;
            background: var(--gradient-primary);
            border-radius: 2px;
        }

        h1 {
            font-size: clamp(1.5rem, 3.5vw, 1.9rem);
            font-weight: 600;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 0.5rem;
            line-height: 1.3;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: 0.95rem;
            font-weight: 400;
        }

        .input-group {
            margin-bottom: 2rem;
            position: relative;
        }

        .input-group:last-of-type {
            margin-bottom: 2.5rem;
        }

        label {
            display: block;
            margin-bottom: 0.75rem;
            font-size: 0.9rem;
            font-weight: 500;
            color: var(--text-secondary);
            letter-spacing: 0.025em;
        }

        input,
        select {
            width: 100%;
            padding: 1rem 1.25rem;
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius-sm);
            background: rgba(255, 255, 255, 0.05);
            color: var(--text-primary);
            font-size: 1rem;
            font-weight: 400;
            transition: var(--transition);
            backdrop-filter: blur(10px);
        }

        input:focus,
        select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 4px rgba(0, 102, 255, 0.1);
            background: rgba(255, 255, 255, 0.08);
        }

        input::placeholder {
            color: var(--text-muted);
            font-weight: 400;
        }

        select {
            cursor: pointer;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%23a8b2d1' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 1rem center;
            background-size: 1.25rem;
            padding-right: 3rem;
        }

        select option {
            background: var(--bg-secondary);
            color: var(--text-primary);
            padding: 0.5rem;
        }

        .download-btn {
            width: 100%;
            padding: 1.25rem 2rem;
            background: var(--gradient-primary);
            border: none;
            border-radius: var(--border-radius-sm);
            color: var(--text-primary);
            font-size: 1.05rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
            letter-spacing: 0.025em;
            box-shadow: var(--shadow-sm);
        }

        .download-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.6s;
        }

        .download-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .download-btn:hover::before {
            left: 100%;
        }

        .download-btn:active {
            transform: translateY(0);
        }

        .download-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .progress-container {
            margin-top: 2rem;
            display: none;
            animation: slideDown 0.3s ease-out;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            overflow: hidden;
            margin-bottom: 1rem;
        }

        .progress {
            width: 0%;
            height: 100%;
            background: var(--gradient-primary);
            border-radius: 3px;
            transition: width 0.3s ease;
            position: relative;
        }

        .progress::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            background-image: linear-gradient(45deg, rgba(255, 255, 255, .2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .2) 50%, rgba(255, 255, 255, .2) 75%, transparent 75%, transparent);
            background-size: 20px 20px;
            animation: progress-stripes 1s linear infinite;
        }

        @keyframes progress-stripes {
            0% {
                background-position: 0 0;
            }

            100% {
                background-position: 20px 0;
            }
        }

        .status {
            text-align: center;
            color: var(--text-secondary);
            font-size: 0.9rem;
            line-height: 1.5;
        }

        .status.success {
            color: var(--success-color);
        }

        .status.error {
            color: var(--error-color);
        }

        .footer {
            margin-top: 2.5rem;
            text-align: center;
            font-size: 0.85rem;
            color: var(--text-muted);
            line-height: 1.6;
        }

        .footer a {
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition);
        }

        .footer a:hover {
            color: var(--primary-light);
            text-decoration: underline;
        }

        .lang-toggle {
            position: absolute;
            top: -4rem;
            right: 0;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius-sm);
            color: var(--text-secondary);
            padding: 0.75rem 1.25rem;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.85rem;
            font-weight: 500;
            backdrop-filter: blur(20px);
            box-shadow: var(--shadow-sm);
            z-index: 100;
        }

        .lang-toggle:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: var(--primary-color);
            color: var(--primary-color);
            transform: translateY(-1px);
        }

        @media (max-width: 480px) {
            .container {
                width: 95%;
                padding: 2rem;
                margin: 1rem;
            }
            
            .lang-toggle {
                top: -3rem;
                right: 0;
                padding: 0.5rem 1rem;
                font-size: 0.8rem;
            }
            
            h1 {
                font-size: clamp(1.3rem, 4vw, 1.6rem);
                white-space: normal;
            }
            
            .subtitle {
                font-size: 0.85rem;
            }
            
            input, select {
                padding: 0.875rem 1rem;
                font-size: 0.95rem;
            }
            
            .download-btn {
                padding: 1rem 1.5rem;
                font-size: 1rem;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <button class="lang-toggle" onclick="toggleLanguage()" id="langToggle">中文</button>
        <div class="header">
            <h1 id="main-title">Steam Manifest Downloader</h1>
            <p class="subtitle" id="subtitle">Download Steam game manifest files easily</p>
        </div>

        <div class="input-group">
            <label for="appId" id="app-id-label">Enter App ID</label>
            <input type="text" id="appId" data-placeholder-en="e.g.: 413150" data-placeholder-zh="例如：413150"
                placeholder="e.g.: 413150" autocomplete="off">
        </div>

        <div class="input-group">
            <label for="source" id="source-label">Select Download Source</label>
            <select id="source">
                <option value="official" data-text-en="Github Official Source" data-text-zh="Github 官方源" selected>Github Official
                    Source</option>
                <option value="ghproxy2" data-text-en="ghfast.top Accelerated Source" data-text-zh="ghfast.top 加速源">
                    ghfast.top Accelerated Source</option>
            </select>
        </div>

        <button class="download-btn" onclick="downloadManifest()" id="download-btn">
            <span>Download</span>
        </button>

        <div class="progress-container" id="progressContainer">
            <div class="progress-bar">
                <div class="progress" id="progress"></div>
            </div>
            <div class="status" id="status"></div>
        </div>

        <div class="footer">
            <p id="footer-text">Find App ID? Visit <a href="https://steamdb.info/" target="_blank">SteamDB</a> or <a
                    href="https://steamui.com/" target="_blank">SteamUI</a></p>
            <p id="mirror-note" style="display: none;"></p>
        </div>
    </div>

    <script>
        // Language translations
        const translations = {
            en: {
                title: "Steam Manifest Downloader",
                pageTitle: "Steam Manifest Downloader",
                mainTitle: "Steam Manifest Downloader",
                subtitle: "Download Steam game manifest files easily",
                appIdLabel: "Enter App ID",
                sourceLabel: "Select Download Source",
                downloadBtn: "Download",
                footerText: 'Find App ID? Visit <a href="https://steamdb.info/" target="_blank">SteamDB</a> or <a href="https://steamui.com/" target="_blank">SteamUI</a>',
                mirrorNote: "",
                langToggle: "中文",
                placeholder: "e.g.: 413150",
                sources: {
                    official: "Github Official Source",
                    ghproxy2: "ghfast.top Accelerated Source"
                },
                messages: {
                    enterAppId: "Please enter App ID!",
                    preparing: "Preparing download...",
                    downloadStarted: "Download started, please check your browser downloads!<br>If redirected to error page, the App ID might not have corresponding Manifest files or please try switching download source!"
                }
            },
            zh: {
                title: "Steam 游戏清单下载器",
                pageTitle: "Steam 游戏清单下载器",
                mainTitle: "Steam 游戏清单下载器",
                subtitle: "轻松下载 Steam 游戏清单文件",
                appIdLabel: "输入 App ID",
                sourceLabel: "选择下载源",
                downloadBtn: "下载",
                footerText: '查询 App ID？访问 <a href="https://steamdb.info/" target="_blank">SteamDB</a> 或 <a href="https://steamui.com/" target="_blank">SteamUI</a>',
                mirrorNote: '提示：国内镜像 <a href="https://manifest.040608.xyz" target="_blank">manifest.040608.xyz</a> 访问更快',
                langToggle: "English",
                placeholder: "例如：413150",
                sources: {
                    official: "Github 官方源",
                    ghproxy2: "ghfast.top 加速源"
                },
                messages: {
                    enterAppId: "请输入 App ID！",
                    preparing: "正在准备下载...",
                    downloadStarted: "已经开始下载，请检查浏览器下载！<br>如果跳转错误页面，可能是该 App ID 暂未收集对应的游戏清单文件或者请切换下载源重试!"
                }
            }
        };

        // Detect browser language and set default
        let currentLang = 'en'; // Default to English

        // Auto-detect Chinese browsers
        function detectLanguage() {
            const browserLang = (navigator.language || navigator.userLanguage || '').toLowerCase();
            const simplifiedZh = browserLang.startsWith('zh-cn') || browserLang.startsWith('zh-hans') || browserLang.startsWith('zh-sg');
            return simplifiedZh ? 'zh' : 'en';
        }

        // Initialize language based on detection
        function initLanguage() {
            currentLang = detectLanguage();
            updateLanguage({ setDefaultSource: true });
        }

        // Toggle language
        function toggleLanguage() {
            currentLang = currentLang === 'en' ? 'zh' : 'en';
            updateLanguage();
        }

        // Update all text based on current language
        function updateLanguage(options = {}) {
            const { setDefaultSource = false } = options;
            const t = translations[currentLang];

            // Update page title
            document.title = t.pageTitle;
            document.getElementById('page-title').textContent = t.pageTitle;

            // Update main elements
            document.getElementById('main-title').textContent = t.mainTitle;
            document.getElementById('subtitle').textContent = t.subtitle;
            document.getElementById('app-id-label').textContent = t.appIdLabel;
            document.getElementById('source-label').textContent = t.sourceLabel;
            document.getElementById('download-btn').textContent = t.downloadBtn;
            document.getElementById('footer-text').innerHTML = t.footerText;
            document.getElementById('langToggle').textContent = t.langToggle;
            const mirrorNote = document.getElementById('mirror-note');
            mirrorNote.innerHTML = t.mirrorNote;
            mirrorNote.style.display = t.mirrorNote ? 'block' : 'none';

            // Update placeholder
            document.getElementById('appId').placeholder = t.placeholder;

            // Update select options
            const selectOptions = document.querySelectorAll('#source option');
            selectOptions.forEach(option => {
                const value = option.value;
                option.textContent = t.sources[value];
            });

            if (setDefaultSource) {
                const sourceSelect = document.getElementById('source');
                sourceSelect.value = currentLang === 'zh' ? 'ghproxy2' : 'official';
            }

            // Update HTML lang attribute
            document.documentElement.lang = currentLang === 'zh' ? 'zh-CN' : 'en';
        }

        function downloadManifest() {
            const appId = document.getElementById('appId').value.trim();
            const source = document.getElementById('source').value;
            const t = translations[currentLang];

            if (!appId) {
                showStatus(t.messages.enterAppId, 'error');
                return;
            }

            const progressContainer = document.getElementById('progressContainer');
            const progress = document.getElementById('progress');
            progressContainer.style.display = 'block';
            progress.style.width = '0%';
            showStatus(t.messages.preparing, '');

            // 根据选择的源构建下载链接
            let baseUrl;
            switch (source) {
                case 'ghproxy2':
                    baseUrl = 'https://ghfast.top/https://github.com/SteamAutoCracks/ManifestHub/archive/refs/heads/';
                    break;
                default:
                    baseUrl = 'https://github.com/SteamAutoCracks/ManifestHub/archive/refs/heads/';
            }

            const downloadUrl = `${baseUrl}${appId}.zip`;

            // 模拟下载进度，给予用户点击反馈
            let width = 0;
            const interval = setInterval(() => {
                if (width >= 100) {
                    clearInterval(interval);
                    showStatus(t.messages.downloadStarted, 'success');
                    setTimeout(() => {
                        // 创建下载链接并在新标签页打开
                        const link = document.createElement('a');
                        link.href = downloadUrl;
                        link.download = `manifest_${appId}.zip`;
                        link.target = '_blank'; // 在新标签页打开
                        document.body.appendChild(link);
                        link.click();
                        document.body.removeChild(link);
                    }, 1000);
                } else {
                    width++;
                    progress.style.width = width + '%';
                }
            }, 5);
        }

        function showStatus(message, type) {
            const status = document.getElementById('status');
            status.innerHTML = message;
            status.className = 'status ' + type;
        }

        // 添加回车键触发下载
        document.getElementById('appId').addEventListener('keypress', function (event) {
            if (event.key === 'Enter') {
                downloadManifest();
            }
        });

        // Initialize language on page load
        document.addEventListener('DOMContentLoaded', function () {
            initLanguage();
        });
    </script>
    <script type="text/javascript">
        (function (c, l, a, r, i, t, y) {
            c[a] = c[a] || function () { (c[a].q = c[a].q || []).push(arguments) };
            t = l.createElement(r); t.async = 1; t.src = "https://www.clarity.ms/tag/" + i;
            y = l.getElementsByTagName(r)[0]; y.parentNode.insertBefore(t, y);
        })(window, document, "clarity", "script", "rok59ctcvn");
    </script>
<!-- Cloudflare Pages Analytics --><script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "a789e8f1c7814519b4fe45e72388d984"}'></script><!-- Cloudflare Pages Analytics --></body>

</html>
